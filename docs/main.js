(()=>{"use strict";class e{constructor(e,t){this.parentEl=e,this.cardsLogoArray=t,this.addCardsLogoToDom()}addCardsLogoToDom(){this.cardsLogoArray.forEach((e=>{const t=document.createElement("img");t.classList.add("card-logo","transparent"),t.dataset.cardName=e.name,t.src=`./img/${e.fileName}`,this.parentEl.appendChild(t)}))}}const t=[{name:"visa",fileName:"visa.png",prefix:4},{name:"mastercard",fileName:"mastercard.png",prefix:5},{name:"maestro",fileName:"maestro.png",prefix:6},{name:"mir",fileName:"mir.png",prefix:2}],r=function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=+e.value[0],s=t.find((e=>e.prefix===a)),n=Array.from(document.querySelectorAll(".card-logo")).find((e=>"card-logo"===e.className));n&&(n.className="card-logo transparent");const i=document.querySelector(`.card-logo[data-card-name="${s.name}"]`);s&&r?i.classList.remove("transparent"):i.classList.add("transparent")};class a{constructor(e,t){this.formEl=e,this.inputEl=t,this.addClickEvent(this.formEl)}static luhnCheck(e){if(!e)return!1;if(/[^0-9-\s]+/.test(e))return!1;let t=0,r=0,a=!1;const s=e.replace(/\D/g,"");for(let e=s.length-1;e>=0;e--){const n=s.charAt(e);r=parseInt(n,10),a&&(r*=2,r>9&&(r-=9)),t+=r,a=!a}return t%10==0}addClickEvent(e){e.addEventListener("submit",(e=>{e.preventDefault(),a.luhnCheck(this.inputEl.value)?(r(this.inputEl),this.inputEl.classList.remove("red-bkg"),this.inputEl.classList.add("green-bkg")):(r(this.inputEl,!1),this.inputEl.classList.remove("green-bkg"),this.inputEl.classList.add("red-bkg"))}))}}document.addEventListener("DOMContentLoaded",(()=>{const r=document.querySelector(".cards-container"),s=document.querySelector(".card-number-form"),n=document.querySelector(".form-input");new e(r,t),new a(s,n)}))})();